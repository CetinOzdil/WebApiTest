<html>
<head>
    <title>Selfhost Index Page</title>
    <script>
        let controller; 
        let signal;

        function loadDoc(address) {
            controller = new AbortController();
            signal = controller.signal;

            document.getElementById("abortButton").disabled = false;

            fetch(address, {
                method: "GET",
                signal: signal,
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
            }).then(response => {
                document.getElementById("abortButton").disabled = true;

                if (!response.ok) {
                    document.getElementById("demo").innerHTML = response.statusText;
                    return;
                }

                response.json().then(data => {
                    document.getElementById("demo").innerHTML = JSON.stringify(data);
                });
            });
        }

        function logOut() {
            if (!confirm("Really wanna logout?"))
                return;

            window.location.href = "logout";
        }

        function abortFetching() {
            controller.abort();
            document.getElementById("abortButton").disabled = true;
        }
    </script>
</head>
<body>
    Hello from selfhost!<br /><br />

    <input type="button" value="Make an API call!" onclick="loadDoc('api/Test/GetTestData')" /> or
    <input type="button" value="maybe another API call..." onclick="loadDoc('api/Test/GetTestJSONData')" /> or
    <input type="button" value="another one?" onclick="loadDoc('api/Login/GetAll')" /><br /><br />

    <input id="abortButton" type="button" value="Abort abort abort!" onclick="abortFetching()" disabled /><br /><br />

    <input type="button" value="Wanna logout?" onclick="logOut()" /> or <a href="test.html">wanna go another page maybe?</a><br /><br />

    <div style="color:blue" id="demo"></div>
</body>
</html>